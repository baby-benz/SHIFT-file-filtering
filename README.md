
# SHIFT File Filter

Утилита-разделитель содержимого файла на строки, целочисленные числа и числа с плавающей точкой и последующей записью в отдельные файлы.

При запуске утилиты в командной строке подается несколько файлов, содержащих вперемешку целые числа, строки и вещественные числа. В качестве разделителя
используется перевод строки. Строки из файлов читаются по очереди в соответствии с их
перечислением в командной строке.

Утилита записывает разные типы данных в разные файлы. Целые числа в один
выходной файл, вещественные в другой, строки в третий. По умолчанию файлы с
результатами располагаются в текущей папке с именами `integers.txt`, `floats.txt`, `strings.txt`.

Файлы с результатами должны создаваться по мере необходимости. Если какого-то типа
данных во входящих файлах нет, то соответствующий исходящий файл не создается.

В процессе фильтрации данных необходимо собирается статистика по каждому типу данных.
Статистика поддерживается двух видов: краткая и полная. Выбор статистики
производится опциями (по умолчанию `-s` или `-simple` и `-f` или `-full` для краткой и полной формы соответсвенно). Краткая статистика содержит только
количество элементов записанных в исходящие файлы. Полная статистика для чисел
дополнительно содержит минимальное и максимальное значения, сумма и среднее.
Полная статистика для строк, помимо их количества, содержит также размер самой
короткой строки и самой длинной.

Статистику по каждому типу отфильтрованных данных утилита выводит в консоль в формате:
```text
[
    Вид статистики  Значение
]
```

Поддерживаемые опции перечислены в таблице. Любую из опций можно задавать как с двойным символом '-', так и с одинарным.

| Полный вариант | Краткий вариант | Описание                                                                                                                                                          |
|----------------|-----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| -append         | -a               | По умолчанию если выходной файл с таким же названием существует, то он перезаписывается. Эта опция задает режим добавления в существующие файлы вместо перезаписи |
| -prefix         | -p               | Префикс выходных файлов. Должен содержать исключительно разрешенные символы для файлов текущей ОС                                                                 |
| -output         | -o               | Путь по которому необходимо сохранить выходные файлы. По умолчанию это текущая директория                                                                         |
| -simple         | -s               | Режим вывода краткой статистики                                                                                                                                 |
| -full           | -f               | Режим вывода полной статистики                                                                                                                                    |







## Использование утилиты
Для генерации executable JAR необходимо выполнить команду:
```bash
mvn clean package
```
По умолчанию JAR создастся в target директории проекта.

### Пример работы
Содержимое входного файла **in1.txt**
```text
Lorem ipsum dolor sit amet
45
Пример
3.1415
consectetur adipiscing
-0.001
-1E-8
тестовое задание
100500
0x1EF
0757
```
Содержимое входного файла **in2.txt**
```text
Нормальная форма числа с плавающей запятой
1.528535047E-25
Long
1234567890123456789
1e1
```
Запуск утилиты
```bash
java -jar SHIFT-file-filtering-1.0.jar -s -a -p sample- in1.txt in2.txt
```
**sample-integers.txt**
```text
45
100500
0x1EF
0757
1234567890123456789
1e1
```
**sample-floats.txt**
```text
3.1415
-0.001
-1E-8
1.528535047E-25
```
**sample-strings.txt**
```text
Lorem ipsum dolor sit amet
Пример
consectetur adipiscing
тестовое задание
Нормальная форма числа с плавающей запятой
Long
```
**Комментарий:**\
Число `1е1`, записанное в формате экспоненциальной записи (также называемый "научный формат"), считается за целочисленное, поскольку в классической записи может быть записано как `10`.\
В свою очередь число `1E-8` считаются за число с плавающей точкой, поскольку может быть записано как: `0.00000001`.

## Тесты

### Покрытие
В таблице представлены классы, отвечающие за основную функциональность (парсинг входных аргументов, определение типа данных в строке файла, чтение и обработка файлов)

| Класс                                      | % покрытия строк | % покрытия ветвей |
|--------------------------------------------|------------------|-------------------|
| ru.cft.service.argument.CliArgumentsParser | 100              | 100               |
| ru.cft.service.filter.RegularFileFilter    | 80               | 68                |
| ru.cft.util.NumericUtil                    | 100              | 96                |
| ru.cft.util.OsUtil                         | 100              | 100               |

### Запуск тестов
Тесты запускаются автоматически при сборке проекта.\
Отдельно от сборки тесты можно запустить следующим образом:

```bash
mvn test
```


## Особенности

- Символьные коды опций программы и имена выходных файлов (вместо стандартных integers.txt, floats.txt, strings.txt) можно менять через application.properties.\
Пример:
```
cli.argument.names.prefix.long=prefix
cli.argument.names.prefix.short=p
cli.argument.names.output.long=output
cli.argument.names.output.short=o
cli.argument.names.append.long=append
cli.argument.names.append.short=a
cli.argument.names.statistics.simple.long=simple
cli.argument.names.statistics.simple.short=f
cli.argument.names.statistics.full.long=full
cli.argument.names.statistics.full.short=s

cli.output.filenames.integer=integers.txt
cli.output.filenames.floating-point=floats.txt
cli.output.filenames.string=strings.txt
```
- Поддержка восьмеричного целочисленного, шестнадцатеричного целочисленного, научного (`1.2E10`), Java (`100L`, `100l`, `10.0d`, `10.0D`) форматов записи чисел

## Планы по улучшению

- Добавить поддержку двоичных чисел (формата `0b111`)
- Добавить поддержку чисел с плавающей точкой для шестнадцетиричного и восьмеричного форматов записи


## Разработано с использованием

- Java 21 (JDK BellSoft Liberica 21.0.5)
- Apache Maven 3.9.9

## POM-зависимости

- Lombok 1.18.34
- Apache Commons CLI 1.8.0
- JUnit 5 5.11.4
- AssertJ 3.27.3
- Apache Maven Shade Plugin 3.6.0